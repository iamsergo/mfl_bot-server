"use strict";(self.webpackChunkmfl_bot_web_app=self.webpackChunkmfl_bot_web_app||[]).push([[798],{798:function(n,e,t){t.r(e),t.d(e,{default:function(){return j}});var r=t(214),c=t(861),i=t(152),o=t(791),u=t(776),a=t(645),s=t(975),d=t(413),f=t(184);var l=function(n){var e=n.disabled,t=n.onInc,r=n.onDec;return(0,f.jsxs)("div",{className:"prediction-counter",children:[(0,f.jsx)("div",{className:"prediction-counter__btn prediction-counter__btn--inc",onClick:t,children:"+"}),(0,f.jsx)("div",{className:"prediction-counter__btn prediction-counter__btn--dec".concat(e?" disabled":""),onClick:function(){return!e&&r()},children:"-"})]})};var m=function(n){var e=n.game,t=n.bottom,r=n.onScoreChange,c=n.onClose,u=o.useState(0),s=(0,i.Z)(u,2),m=s[0],p=s[1],h=o.useState(0),v=(0,i.Z)(h,2),j=v[0],b=v[1];return o.useEffect((function(){r([m,j])}),[m,j]),o.useEffect((function(){document.body.style.overflow=e?"hidden":"auto"}),[e]),(0,f.jsx)("div",{className:"prediction-modal-wrapper ".concat(e?"opened":"closed"),onClick:function(){c(),p(0),b(0)},children:(0,f.jsxs)("div",{className:"prediction-modal",onClick:function(n){return n.stopPropagation()},children:[(0,f.jsxs)("div",{className:"prediction-modal-header",children:[(0,f.jsx)(l,{disabled:0===m,onInc:function(){return p((function(n){return n+1}))},onDec:function(){return p((function(n){return n-1}))}}),e&&(0,f.jsx)(a.Z,{game:(0,d.Z)((0,d.Z)({},e),{},{score:[m,j]})}),(0,f.jsx)(l,{disabled:0===j,onInc:function(){return b((function(n){return n+1}))},onDec:function(){return b((function(n){return n-1}))}})]}),t&&(0,f.jsx)("div",{className:"prediction-modal-bottom",children:t})]})})},p=t(665);function h(){return(0,f.jsx)("h1",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})}function v(){return(0,f.jsxs)("h2",{children:["\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 (",(0,f.jsx)("br",{}),"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."]})}var j=function(n){var e=n.tg,t=n.user,d=o.useState(!0),l=(0,i.Z)(d,2),j=l[0],b=l[1],g=o.useState(!1),x=(0,i.Z)(g,2),Z=x[0],_=x[1],O=o.useState(!1),y=(0,i.Z)(O,2),w=y[0],k=y[1],C=o.useState({}),N=(0,i.Z)(C,2),P=N[0],S=N[1];o.useEffect((function(){e.ready(),e.expand(),u.Z.getGamesForUser({userId:t.id}).then((function(n){return S((0,p.U)(n))})).catch((function(n){return _(!0)})).finally((function(){return b(!1)}))}),[]);var D,M=o.useState([0,0]),E=(0,i.Z)(M,2),B=E[0],I=E[1],F=o.useState(null),U=(0,i.Z)(F,2),G=U[0],H=U[1];function q(){return z.apply(this,arguments)}function z(){return(z=(0,c.Z)((0,r.Z)().mark((function n(){var c;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={userId:t.id,gameId:G.id,prediction:B},n.prev=1,e.MainButton.showProgress(),n.next=5,u.Z.createPrediction(c);case 5:e.close(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),k(!0);case 11:return n.prev=11,e.MainButton.hideProgress(),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[1,8,11,14]])})))).apply(this,arguments)}return o.useEffect((function(){G?(e.MainButton.text="\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c",e.MainButton.show()):e.MainButton.hide()}),[G]),o.useEffect((function(){return G&&e.MainButton.onClick(q),function(){e.MainButton.offClick(q)}}),[G,B]),D=j?(0,f.jsx)(h,{}):Z?(0,f.jsx)(v,{}):Object.entries(P).map((function(n){var e=(0,i.Z)(n,2),t=e[0],r=e[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h2",{children:t}),Object.entries(r).map((function(n){var e=(0,i.Z)(n,2),t=e[0],r=e[1];return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("h3",{children:t}),(0,f.jsx)(s.Z,{children:r.map((function(n){return(0,f.jsx)(a.Z,{game:n,onClick:function(){return function(n){H(n)}(n)}},n.id)}))})]})}))]})})),(0,f.jsxs)("div",{id:"prediction-app",children:[D,(0,f.jsx)(m,{game:G,onScoreChange:I,onClose:function(){return H(null)},bottom:w&&(0,f.jsx)("div",{className:"prediction-error",children:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."})})]})}},645:function(n,e,t){t.d(e,{Z:function(){return i}});var r=t(593),c=t(184);var i=function(n){var e=n.game,t=n.onClick;return(0,c.jsxs)("div",{className:"game".concat(t?" clickable":""),onClick:function(){return t&&t()},children:[(0,c.jsx)("div",{className:"game__time",children:(0,r.p)(+e.time)}),(0,c.jsxs)("div",{className:"game__logos",children:[e.teams_logos.map((function(n,t){return(0,c.jsx)("img",{src:n,alt:e.teams[t]},t)})),e.score&&e.score.map((function(n,e){return(0,c.jsx)("div",{className:"game__score game__score--".concat(e?"away":"home"),children:n},e)}))]}),(0,c.jsx)("div",{className:"game__teams",children:e.teams.map((function(n,e){return(0,c.jsx)("div",{className:"game__team",children:n},e)}))})]})}},975:function(n,e,t){t.d(e,{Z:function(){return c}});var r=t(184);var c=function(n){var e=n.children;return(0,r.jsx)("div",{className:"games-list",children:e})}},593:function(n,e,t){function r(n){var e=new Date(n),t=["\u041f\u041d","\u0412\u0422","\u0421\u0420","\u0427\u0422","\u041f\u0422","\u0421\u0411","\u0412\u0421"][e.getDay()],r=e.getDate(),c=e.getMonth()+1,i=e.getHours(),o=e.getMinutes(),u=function(n){return n>=10?"".concat(n):"0".concat(n)};return"".concat(t," \xb7 ").concat(u(r),".").concat(u(c)," \xb7 ").concat(u(i),":").concat(u(o))}t.d(e,{p:function(){return r}})},665:function(n,e,t){t.d(e,{U:function(){return u}});var r=t(152),c=t(942),i=t(413);function o(n,e){return e.reduce((function(e,t){var r=t[n];return e[r]?(0,i.Z)((0,i.Z)({},e),{},(0,c.Z)({},r,e[r].concat([t]))):(0,i.Z)((0,i.Z)({},e),{},(0,c.Z)({},r,[t]))}),{})}function u(n){var e=o("group",n),t=Object.entries(e).map((function(n){var e=(0,r.Z)(n,2);return[e[0],o("tour",e[1])]}));return Object.fromEntries(t)}},942:function(n,e,t){function r(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}t.d(e,{Z:function(){return r}})},413:function(n,e,t){t.d(e,{Z:function(){return i}});var r=t(942);function c(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function i(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?c(Object(t),!0).forEach((function(e){(0,r.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}}}]);
//# sourceMappingURL=798.99f2940a.chunk.js.map