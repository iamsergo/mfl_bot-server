{"version":3,"file":"static/js/319.910343d1.chunk.js","mappings":"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","sources":["components/TournamentTable/index.tsx","apps/tournament/index.tsx","helpers/get-tables-by-groups.ts","components/GameItem/index.tsx","components/GamesList/index.tsx","helpers/format-date.ts","helpers/get-games-by-groups.ts","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js"],"sourcesContent":["import { TournamentTableRow } from \"../../types\";\nimport './TournamentTable.sass';\n\ntype TournamentTableProps = {\n  header: string;\n  rows: TournamentTableRow[];\n};\n\nfunction TournamentTable({header, rows} : TournamentTableProps) {\n  return (\n    <div className=\"tournament-table-wrapper\">\n      <h1>{header}</h1>\n      <div className=\"tournament-table\">\n        <div className=\"tournament-table__left\">\n          <div className=\"tournament-table__row\" key=\"team-header\">\n            <div className=\"team-header\">Команда</div>\n          </div>\n          {rows.map((r, i) => {\n            return <div className=\"tournament-table__row\" key={i}>\n              <div className=\"position\">{i+1}.</div>\n              <div className=\"logo\">\n                <img src={r.team_logo} alt={r.team} />\n              </div>\n              <div className=\"value\">{r.team}</div>\n            </div>\n          })}\n        </div>\n        <div className=\"tournament-table__right\">\n          <div className=\"tournament-table__row\" key=\"stats-header\">\n              <div className=\"games header\">И</div>\n              <div className=\"win header\">В</div>\n              <div className=\"draw header\">Н</div>\n              <div className=\"lose header\">П</div>\n              <div className=\"score header\">З</div>\n              <div className=\"pass header\">Пр</div>\n              <div className=\"diff header\">Р</div>\n              <div className=\"points header\">О</div>\n            </div>\n          {rows.map((r, i) => {\n            return (\n              <div className=\"tournament-table__row\" key={i}>\n                <div className=\"games\">{r.games}</div>\n                <div className=\"win\">{r.win}</div>\n                <div className=\"draw\">{r.draw}</div>\n                <div className=\"lose\">{r.lose}</div>\n                <div className=\"score\">{r.score}</div>\n                <div className=\"pass\">{r.pass}</div>\n                <div className=\"diff\">{r.diff}</div>\n                <div className=\"points\">{r.points}</div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default TournamentTable;\n","import React from 'react';\nimport api from '../../api';\nimport GameItem from '../../components/GameItem';\nimport GamesList from '../../components/GamesList';\nimport TournamentTable from '../../components/TournamentTable';\nimport { ByKeys, getGamesByGroups } from '../../helpers/get-games-by-groups';\nimport { getTablesByGroups } from '../../helpers/get-tables-by-groups';\nimport { Game, TgUser, TournamentTableRow } from '../../types';\nimport './styles.sass';\n\nfunction TournamentAppLoading() {\n  return <h1>Загрузка...</h1>;\n}\n\nfunction TournamentAppError() {\n  return <h2>Произошла ошибка. <br/>Попробуйте позже.</h2>;\n}\n\ntype TournamentAppProps = {\n  tg: any;\n  user: TgUser;\n};\n\nfunction TournamentApp({ tg, user }: TournamentAppProps) {\n  const [loading, setLoading] = React.useState(true);\n  const [error, setError] = React.useState(false);\n  const [tablesByGroups, setTablesByGroups] = React.useState<ByKeys<TournamentTableRow[]>>({});\n  const [gamesByGroups, setGamesByGroups] = React.useState<ByKeys<ByKeys<Game[]>>>({});\n\n  React.useEffect(() => {\n    tg.ready();\n    tg.expand();\n    Promise.all([\n      api.getTable(),\n      api.getAllGames(),\n    ])\n    .then(([table, games]) => {\n      setTablesByGroups(getTablesByGroups(table));\n      setGamesByGroups(getGamesByGroups(games));\n    })\n    .catch(setError)\n    .finally(() => setLoading(false));\n  }, []);\n\n  console.log(tablesByGroups);\n  console.log(gamesByGroups);\n\n  let content;\n  if(loading) {\n    content = <TournamentAppLoading />\n  } else if(error) {\n    content = <TournamentAppError />\n  } else {\n    const games = Object.entries(gamesByGroups).map(([groupName, gamesByTours]) => {\n      return (<>\n        <h2>{groupName}</h2>\n        {Object.entries(gamesByTours).map(([tourName, games]) => {\n          return (<>\n            <h3>{tourName}</h3>\n            <GamesList>\n              {games.map(game => {\n                return (\n                  <GameItem key={game.id} game={game} />\n                );\n              })}\n            </GamesList>\n          </>);\n        })}\n      </>);\n    });\n    const tables = Object.entries(tablesByGroups).map(([groupName, rows]) => {\n      return <TournamentTable header={groupName} rows={rows} />\n    })\n    content = (<>\n      {tables}\n      {games}\n    </>);\n  }\n\n  return (\n    <div id=\"tournament-app\">\n      {content}\n    </div>\n  );\n}\n\nexport default TournamentApp;\n","import { Game, TournamentTableRow } from \"../types\";\nimport { ByKeys } from \"./get-games-by-groups\";\n\nexport function getTablesByGroups(table: TournamentTableRow[]): ByKeys<TournamentTableRow[]> {\n  return table.reduce((o, row) => {\n    const k = row.group;\n    if(!o[k]) return { ...o, [k]: [row] };\n    else return { ...o, [k]: o[k].concat([row]) };\n  }, {} as ByKeys<TournamentTableRow[]>);\n}\n","import { formatDate } from '../../helpers/format-date';\nimport { Game } from '../../types';\nimport './GameItem.sass';\n\ntype PredictionGamesListItemProps = {\n  game: Game;\n  onClick?: () => void;\n}\nfunction GameItem({\n  game,\n  onClick,\n}: PredictionGamesListItemProps) {\n  return (\n    <div\n      className={`game${onClick ? ' clickable' : ''}`}\n      onClick={() => onClick && onClick()}\n    >\n      <div className=\"game__time\">\n        {formatDate(+game.time)}\n      </div>\n      <div className=\"game__logos\">\n        {game.teams_logos.map((src, i) => {\n          return <img key={i} src={src} alt={game.teams[i]} />\n        })}\n        {game.score && game.score.map((score, i) => {\n          return <div key={i} className={`game__score game__score--${i ? 'away' : 'home'}`}>\n            {score}\n          </div>\n        })}\n      </div>\n      <div className=\"game__teams\">\n        {game.teams.map((team, i) => {\n          return <div key={i} className=\"game__team\">\n            {team}\n          </div>\n        })}\n      </div>\n    </div>\n  );\n}\n\nexport default GameItem;\n","import './GamesList.sass';\n\ntype PredictionGamesListProps = {\n  children: JSX.Element[];\n};\n\nfunction GamesList({\n  children\n}: PredictionGamesListProps){\n  return (\n    <div className=\"games-list\">\n      {children}\n    </div>\n  );\n}\n\nexport default GamesList;\n","export function formatDate(time: number): string {\n  const date = new Date(time);\n  const dw = ['ПН','ВТ','СР','ЧТ','ПТ','СБ','ВС'][date.getDay()];\n  const d = date.getDate();\n  const m = date.getMonth() + 1;\n  const h = date.getHours();\n  const min = date.getMinutes();\n\n  const f = (v: number) => v >= 10 ? `${v}` : `0${v}`;\n\n  return `${dw} · ${f(d)}.${f(m)} · ${f(h)}:${f(min)}`;\n}\n","import { Game } from \"../types\";\n\nexport type ByKeys<ValueType> = { [key: string]: ValueType };\n\nfunction getGamesByKey(key: keyof Game, games: Game[]): ByKeys<Game[]> {\n  return games.reduce((o, game) => {\n    const k = game[key] as string;\n    if(!o[k]) return { ...o, [k]: [game] };\n    else return { ...o, [k]: o[k].concat([game]) };\n  }, {} as ByKeys<Game[]>);\n}\n\nexport function getGamesByGroups(games: Game[]): ByKeys<ByKeys<Game[]>> {\n  const byGroups = getGamesByKey('group', games);\n  const byGroupsEntries = Object.entries(byGroups)\n    .map(([key, games]) => ([key, getGamesByKey('tour', games)]));\n  return Object.fromEntries(byGroupsEntries);\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}"],"names":["header","rows","className","map","r","i","src","team_logo","alt","team","games","win","draw","lose","score","pass","diff","points","TournamentAppLoading","TournamentAppError","content","tg","user","React","loading","setLoading","error","setError","tablesByGroups","setTablesByGroups","gamesByGroups","setGamesByGroups","ready","expand","Promise","all","api","then","table","reduce","o","row","k","group","concat","getTablesByGroups","getGamesByGroups","catch","finally","console","log","Object","entries","groupName","gamesByTours","tourName","GamesList","game","GameItem","id","tables","onClick","formatDate","time","teams_logos","teams","children","date","Date","dw","getDay","d","getDate","m","getMonth","h","getHours","min","getMinutes","f","v","getGamesByKey","key","byGroups","byGroupsEntries","fromEntries","_defineProperty","obj","value","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties"],"sourceRoot":""}